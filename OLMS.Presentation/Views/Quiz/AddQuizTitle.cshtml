@{
    ViewData["Title"] = "Create Quiz";
}

<div class="quiz-creator-container">
    <h2>Create New Quiz</h2>

    <form id="quizForm" class="quiz-form">
        <div class="form-section">
            <div class="form-group">
                <label for="quiz-title">Quiz Title</label>
                <input type="text" id="quiz-title" class="form-control" placeholder="Enter quiz title" required>
            </div>

            <div class="form-group">
                <label for="quiz-description">Description</label>
                <textarea id="quiz-description" class="form-control" placeholder="Enter quiz description"></textarea>
            </div>

            <div class="form-row">
                <div class="form-group">
                    <label for="quiz-startTime">Start Time</label>
                    <input type="datetime-local" id="quiz-startTime" class="form-control" required>
                </div>

                <div class="form-group">
                    <label for="quiz-endTime">End Time</label>
                    <input type="datetime-local" id="quiz-endTime" class="form-control" required>
                </div>

                <div class="form-group checkbox-group">
                    <input type="checkbox" id="quiz-isTimeLimited">
                    <label for="quiz-isTimeLimited">Time Limited</label>
                </div>
            </div>
        </div>

        <div class="form-actions">
            <button type="submit" class="btn btn-success">Create Quiz</button>
            <button id="CrQuestBtn" class="btn btn-secondary">Create Question</button>
        </div>
    </form>
    <button type="button" onclick="location.href='@Url.Action("AddQuestion", "Quiz")'">
        Add Question
    </button>

</div>

<script>
    document.addEventListener('DOMContentLoaded', function() {
        document.getElementById('quizForm').addEventListener('submit', submitQuiz);
    });

    async function submitQuiz(event) {
        event.preventDefault();

        const quizTitle = document.getElementById('quiz-title').value;
        const quizDescription = document.getElementById('quiz-description').value;
        const startTime = document.getElementById('quiz-startTime').value;
        const endTime = document.getElementById('quiz-endTime').value;
        const isTimeLimited = document.getElementById('quiz-isTimeLimited').checked;

        if (!quizTitle.trim()) {
            alert('Please enter a quiz title');
            return;
        }

        const command = {
            title: quizTitle,
            description: quizDescription,
            startTime: new Date(startTime).toISOString(),
            endTime: new Date(endTime).toISOString(),
            isTimeLimited: isTimeLimited
        };

        try {
            const response = await fetch('https://localhost:7212/api/quiz/create', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify(command)
            });

            if (!response.ok) {
                throw new Error('Failed to create quiz');
            }

            const result = await response.json();
            alert('Quiz created successfully!');

        } catch (error) {
            alert('Error: ' + error.message);
        }
    }
</script>

<style>
    .quiz-creator-container {
        max-width: 800px;
        margin: 0 auto;
        padding: 20px;
    }

    .quiz-form {
        background-color: #f8f9fa;
        padding: 20px;
        border-radius: 8px;
        box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }

    .form-section {
        margin-bottom: 20px;
    }

    .form-group {
        margin-bottom: 15px;
    }

        .form-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: 500;
        }

    .form-control {
        width: 100%;
        padding: 10px;
        border: 1px solid #ced4da;
        border-radius: 4px;
        font-size: 16px;
    }

    textarea.form-control {
        min-height: 80px;
        resize: vertical;
    }

    .form-row {
        display: flex;
        gap: 15px;
        flex-wrap: wrap;
    }

        .form-row .form-group {
            flex: 1;
            min-width: 200px;
        }

    .checkbox-group {
        display: flex;
        align-items: center;
        gap: 5px;
    }

        .checkbox-group input {
            margin-right: 5px;
        }

    .btn {
        padding: 10px 20px;
        border: none;
        border-radius: 4px;
        cursor: pointer;
        font-size: 16px;
        transition: background-color 0.2s;
    }

    .btn-success {
        background-color: #28a745;
        color: white;
    }

        .btn-success:hover {
            background-color: #218838;
        }

    .btn-secondary {
        background-color: #6c757d;
        color: white;
    }

        .btn-secondary:hover {
            background-color: #5a6268;
        }

    .form-actions {
        display: flex;
        justify-content: flex-end;
        gap: 10px;
        margin-top: 20px;
    }
</style>
